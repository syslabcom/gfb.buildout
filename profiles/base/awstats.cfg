[buildout]
extends = base.cfg
awstats-parts = awstats-cron awstats-cron-expire-reports awstats-logrotate

[awstats-cron]
recipe = z3c.recipe.usercrontab
times = @reboot
command = ${buildout:directory}/../awstatsreport/bin/instance start |& logger -t awstatsreport

[awstats-cron-expire-reports]
recipe = z3c.recipe.usercrontab
times = 3 0 * * *
command = /usr/sbin/tmpwatch --mtime --nodirs 1d /srv/www/awstats/reports/

[awstats-logrotate]
recipe = collective.recipe.template
input = profiles/base/templates/awstats.logrotate
output = ${buildout:directory}/logrotate.d/awstats
